@import "custom.css";

*, html, body {
    font-smooth: always !important;
    text-rendering: optimizelegibility !important;
    -webkit-font-smoothing: antialiased !important;
}

@-moz-document 
    regexp("chrome:\/\/(?!devtools).*"), regexp("about:(?!(blank|devtools)).*") {
    :root {
        --addon-icon-size: 38px !important;
        --button-background-color-hover: var(--md-menu-background-color-hover) !important;
        --button-background-color-primary: var(--md-accent-color) !important;
        --button-background-color-primary-hover: color-mix(in srgb, var(--md-accent-color) 86%, white) !important;
        --button-background-color-primary-active: color-mix(in srgb, var(--md-accent-color) 66%, white) !important;
        --color-accent-primary-selected: var(--md-accent-color) !important;
        --focus-outline: var(--md-accent-color) !important;
        --background-color-canvas: var(--md-background-color-0) !important;
        --table-row-background-color-alternate: var(--md-background-color-50) !important;
        --prefs-table-border-width: 1px !important;
        --prefs-table-border: var(--prefs-table-border-width) solid var(--md-menu-border-color) !important;
        --color-gray-80: var(--md-background-color-0) !important;
        --color-gray-70: var(--md-menu-border-color) !important;
        --color-gray-50: var(--md-menu-border-color) !important;
        --panel-border-radius: 8px !important;
    }

    #prefs {
    border: var(--prefs-table-border-width) solid var(--md-menu-border-color) !important;
    }

    #about-config-search {
    -moz-context-properties: fill, fill-opacity;
    fill: var(--md-accent-color) !important;
    opacity: 1 !important;
    fill-opacity: 1 !important;
    }
    * {
        font-family: "Aptos" !important;
    }
    html, body, header, #toolbar {
        --in-content-item-hover: var(--md-menu-background-color-hover) !important;
        background-color: var(--md-background-color-50) !important;
    }
    .panel-list {
        border-radius: 8px !important;
    }
    moz-button[data-l10n-id="addons-heading-search-button"] {
        content: url(chrome://global/skin/icons/search-glass.svg) !important;
        -moz-context-properties: fill !important;
        fill: var(--md-tab-label-color) !important;
        margin-top: 5px !important;
        cursor: pointer !important;
        margin-left: 8px !important;
        padding: 8px 8px !important;
        border-radius: 8px !important;
        background-color: var(--button-background-color) !important;
    }
    moz-button[data-l10n-id="addons-heading-search-button"]:hover {
        background-color: var(--button-background-color-hover) !important;
    }
    moz-button[data-l10n-id="addons-heading-search-button"]:active {
        background-color: var(--button-background-color-active) !important;
    }    
    .info-box-container {
        font-size: unset !important;
        border-radius: 8px !important;
    }
    label[is="moz-label"] {
        display: inline-flex !important;
        align-items: center !important;  /* Vertically aligns checkbox and text */
        vertical-align: middle !important;
    }
    label span.accesskey {
        text-decoration: none !important;
    }
    [is="moz-support-link"] {
        /* 1. Force the element to act like a box so it can have a margin */
        display: inline-flex !important; 
        /* 2. Use both for maximum compatibility */
        margin-inline-start: 4px !important;
        /* 3. Prevent the parent flexbox from squishing the margin to 0 */
        flex-shrink: 0 !important;
    }
    separator.groove {
        border-top: 1px solid var(--md-menu-border-color) !important;
        border-bottom: none !important;
    }
    #categories {
		margin: 10px 0 0 !important;
	}
	#categories > .category {
        margin-inline-start: 17px !important;
		height: 32px !important;
		background-size: 16px !important;
		background-position-y: center !important;
		margin-right: 18px !important;
        border-radius: 10px !important;
	}
	#categories .category-name {
		padding-inline-start: 14px !important;
		font-size: 16px !important;
	}
	.category-icon {
		height: 18px !important;
		width: 18px !important;
	}
    /* Target all category buttons within the categories container */
    #categories button[is="category-button"] .category-name {
        padding-inline-start: 8px !important;
    }
    .category[name="extension"] {
        background-image: url("chrome://mozapps/skin/extensions/category-extensions.svg") !important;
    }
    .addons-icon {
        list-style-image: url("chrome://mozapps/skin/extensions/extension.svg") !important;
    }
    .sidebar-footer-link {
        margin-inline-start: -17px !important;
        height: 46px !important;
        background-size: 16px !important;
        background-position-y: center !important;
        margin-right: 18px !important;
        border-radius: 10px !important;
        font-size: larger !important;
    }
    menupopup, panel {
        &::part(content) {
            border-radius: 8px !important;
            border: 1px solid var(--md-menu-border-color) !important;
            background-color: var(--md-background-color-0) !important;
        }
    }
    /* Align the search row perfectly with the heading row below it */
    .main-search {
        display: flex !important;
        align-items: center !important;
        justify-content: flex-end !important;
        gap: 6px !important;
                margin-top: 10px !important;
            margin-bottom: 30px !important;
        /* Remove extra horizontal padding so it hits the same 'wall' as the heading */
        padding-inline: 0 !important; 
        padding-block: 10px !important;
        
        /* This ensures it respects the same margins as the main heading */
        margin-inline: 20px !important; 
    }

    /* Ensure the search box itself doesn't have stray margins */
    search-addons {
        display: flex !important;
        align-items: center !important;
        margin: 0 !important;
    }

    /* Fix for the 'More Options' alignment */
    .page-options-menu {
        margin-inline-end: 8px !important; /* Ensure no extra offset on the bottom button */
    }

    /* Ensure the input field wrapper doesn't act like a block */
    moz-input-search {
        display: flex !important;
        align-items: center !important;
    }

    .main-search .search-label {
        margin: 0 !important; /* Remove any default margins pushing them apart */
        white-space: nowrap !important;
    }
    .sticky-inner-container {
        background-color: var(--md-background-color-50) !important;
    }
    .sticky-container {
        background-color: var(--md-background-color-50) !important;
    }
    .main-search {
        background-color: var(--md-background-color-50) !important;
    }
    .main-heading {
        background-color: var(--md-background-color-50) !important;
    }
    .card {
        border: 1px solid var(--md-background-color-100) !important;
        background: var(--md-background-color-0) !important;
        border-radius: 8px !important;
    }
    .navigation {
        background-color: var(--md-background-color-0) !important;
    }

    .button-background {
    box-shadow: 0 1px 5px #00000060 !important;
    }

    #trackingProtectionShield {
    fill: var(--md-accent-color) !important;
    fill-opacity: 1.00 !important;
    }

    select, menulist, .expander-down, .expander-up, button[type="menu"] {
        border-radius: 8px !important;
    }

    richlistbox[seltype="multiple"]:focus > richlistitem[current="true"][selected="true"], richlistbox.theme-listbox:focus > richlistitem[current="true"][selected="true"] {
  outline-color: transparent !important;
}
richlistbox[seltype="multiple"]:focus > richlistitem[current="true"], richlistbox.theme-listbox:focus > richlistitem[current="true"] {
  outline: none !important;
}

xul|button[default]:not([disabled="true"]) {
  background-color: var(--md-accent-color) !important;
}

menuitem:not([disabled="true"])[selected="true"] {
  background-color: var(--md-accent-color) !important;
}
#input {
    &[type="search"] {
        background-color: var(--md-background-color-0) !important;
        --input-background-icon: url(chrome://global/skin/icons/search-glass.svg) !important;
        fill: var(--md-accent-color) !important;
        -moz-appearance: none !important;
        appearance: none !important;
        box-shadow: none !important;
        outline: none !important;
        border: 1px solid var(--md-menu-border-color) !important;
        padding-block: 8px !important;
        &:focus {
            border-color: var(--md-accent-color) !important;
            
            /* If you want that border-only glow we created for the buttons: */
            box-shadow: 0 0 2px var(--md-accent-color), 
                        0 0 4px var(--md-selection-background-color) !important;
        }
    }
}
input:where([type="email"], [type="tel"], [type="text"], [type="password"], [type="url"], [type="number"]):focus, textarea:focus, tree:focus-visible, richlistbox:focus-visible {
            border-color: var(--md-accent-color) !important;
            
            /* If you want that border-only glow we created for the buttons: */
            box-shadow: 0 0 2px var(--md-accent-color), 
                        0 0 4px var(--md-selection-background-color) !important;
}
	input[type="checkbox"]:-moz-focusring {
		outline: none !important;
	}

    .container {
        background-color: var(--md-background-color-50) !important;
    }
    .dialogBox {
        background-color: var(--md-background-color-0) !important;
    }
    /* Target checkboxes specifically */
/* --- CHECKBOXES (HTML & XUL) --- */

/* Targets standard HTML inputs AND the internal box of Firefox XUL checkboxes */
input[type="checkbox"],
checkbox .checkbox-check {
    appearance: none !important;
    -moz-appearance: none !important;
    width: 20px !important;
    height: 20px !important;
    border: 1px solid var(--md-content-separator-color) !important;
    border-radius: 4px !important;
    background-color: var(--md-background-color-0) !important;
    position: relative;
    cursor: pointer;
    vertical-align: middle !important;
    align-items: center !important;
    justify-content: center !important;
    box-shadow: 0 1px 5px #00000070 !important;
    transition: background-color, border 60ms linear !important;
}

/* --- Restore Checkmarks for XUL Checkboxes --- */

/* This targets the internal image class you provided in your HTML */
checkbox[checked="true"] .checkbox-check {
    background-image: url("chrome://global/skin/icons/check.svg") !important;
    background-size: 14px !important;
    background-repeat: no-repeat !important;
    background-position: center !important;
    /* Use -moz-context-properties to allow the accent color to fill the SVG check */
    -moz-context-properties: fill !important;
    fill: var(--md-background-color-0) !important; /* Makes the check white/background color against your accent background */
}

/* Ensure the check icon doesn't show when unchecked */
checkbox:not([checked="true"]) .checkbox-check {
    background-image: none !important;
}

/* Apply similar logic for standard HTML inputs if they are also empty */
input[type="checkbox"]:checked {
    background-image: url("chrome://global/skin/icons/check.svg") !important;
    background-size: 14px !important;
    background-repeat: no-repeat !important;
    background-position: center !important;
    -moz-context-properties: fill !important;
    fill: var(--md-background-color-0) !important;
}

/* Hover State: Only trigger if NOT disabled (XUL uses [disabled="true"]) */
input[type="checkbox"]:not(:disabled):hover,
checkbox:not([disabled="true"]):hover .checkbox-check {
    border-color: var(--md-accent-color) !important;
}

/* Explicitly prevent hover effects and fix cursor on Disabled Checkboxes */
input[type="checkbox"]:disabled,
checkbox[disabled="true"],
checkbox[disabled="true"] .checkbox-check {
    cursor: default !important;
    border-color: var(--md-content-separator-color) !important; /* Keep the original border color */
    opacity: 0.7 !important;
}


/* --- RADIO BUTTONS --- */

input[type="radio"],
radio .radio-check {
    appearance: none !important;
    -moz-appearance: none !important;
    width: 20px !important;
    height: 20px !important;
    border: 1px solid var(--md-menu-border-color) !important;
    border-radius: 100px !important; 
    background-color: var(--md-background-color-0) !important;
    position: relative;
    cursor: pointer;
    vertical-align: middle;
    box-shadow: 0 1px 5px #00000070 !important;
    transition: background-color, border 60ms linear !important;
}

input[type="radio"]:not(.wallpaper-input), .radio-check {
  appearance: none !important;
      border: 1px solid var(--md-menu-border-color) !important;
    border-radius: 100px !important; 
    background-color: var(--md-background-color-0) !important;
  width: 18px !important;
  height: 18px !important;
  box-shadow: 0 1px 5px #00000070 !important;
}

/* Radio Hover State: Only trigger if NOT disabled */
input[type="radio"]:not(:disabled):hover,
radio:not([disabled="true"]):hover .radio-check {
    border-color: var(--md-accent-color) !important;
}

/* Explicitly prevent hover effects and fix cursor on Disabled Radios */
input[type="radio"]:disabled,
radio[disabled="true"],
radio[disabled="true"] .radio-check {
    cursor: default !important;
    border-color: var(--md-menu-border-color) !important;
    opacity: 0.7 !important;
}

/* Checked State for both */
input[type="checkbox"]:checked,
checkbox[checked="true"] .checkbox-check,
input[type="radio"]:checked,
radio[selected="true"] .radio-check {
    background-color: var(--md-accent-color) !important;
    border-color: var(--md-accent-color) !important;
}

/* Radio Specific Checked Dot (The "WinUI" Look) */
input[type="radio"]:checked,
radio[selected="true"] .radio-check {
    border: 4px solid var(--md-background-color-0) !important;
    outline: 1px solid var(--md-accent-color) !important;
    outline-offset: -1px !important;
}
/* 1. Target ACTIVE (Enabled) Buttons with the Glow */
:not(dialog, .dialogBox) :not(button-group) > button:is([accesskey], .accessory-button, [dlgtype="cancel"], .disco-cta-button, [data-l10n-id="translations-manage-language-download-button"]):not(button[type="menu"]):not([disabled], :disabled) {
    border: none !important;
    color: var(--md-tab-label-color) !important;
    background-color: var(--button-background-color) !important;
    border-radius: 8px !important;
    box-shadow: 0 1px 5px #00000060 !important;
    filter: none !important;
    font-weight: 600 !important;
}

/* 2. Hover state - Only for ENABLED buttons */
:not(dialog, .dialogBox) :not(button-group) > button:is([accesskey], .accessory-button, [dlgtype="cancel"], .disco-cta-button, [data-l10n-id="translations-manage-language-download-button"]):not(button[type="menu"]):not([disabled], :disabled):hover {
    background-color: var(--button-background-color-hover) !important;
    border-color: var(--md-accent-color) !important; /* Ensures border stays lit on hover */
}

:not(dialog, .dialogBox) :not(button-group) > button:is([accesskey], .accessory-button, [dlgtype="cancel"], .disco-cta-button, [data-l10n-id="translations-manage-language-download-button"]):not(button[type="menu"]):not([disabled], :disabled):hover:active {
    background-color: var(--button-background-color-active) !important;
    color: var(--button-text-color-active) !important;
}

/* 3. Handle DISABLED Buttons (No glow, no hover, muted colors) */
:not(dialog, .dialogBox) :not(button-group) > button:is([accesskey], .accessory-button, [dlgtype="cancel"], .disco-cta-button, [data-l10n-id="translations-manage-language-download-button"]):not(button[type="menu"]):is([disabled], :disabled) {
    border: 1px solid var(--md-background-color-100) !important; /* Fallback to muted border */
    border-radius: 8px !important;
    box-shadow: 0 1px 5px #00000082 !important;
    opacity: 0.4 !important;    /* Visually dim the button */
    cursor: default !important; /* No pointer finger */
    background-color: transparent !important;
}

/* 4. Kill the hover effect for DISABLED buttons specifically */
:not(dialog, .dialogBox) :not(button-group) > button:is([accesskey], .accessory-button, [dlgtype="cancel"], .disco-cta-button, [data-l10n-id="translations-manage-language-download-button"]):not(button[type="menu"]):is([disabled], :disabled):hover {
    background-color: transparent !important;
    border-color: var(--md-background-color-100) !important;
}

.action-box {
  background-color: var(--md-background-color-0) !important;
}

h1 {
    font-size: 28px !important;
    font-family: unset !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 3px #000 !important;
}

h2 {
    color: var(--md-text-primary) !important;
    font-size: 22px !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 3px #000 !important;
}

#sidebar {
  background-color: var(--md-background-color-0) !important;
}


menuitem:not([disabled="true"])[selected="true"] {
  background-color: var(--md-accent-color) !important;
}

treecol, .tree-columnpicker-button {
  border-inline-start: 1px solid var(--md-menu-border-color) !important;
  box-shadow: inset 0 -1px var(--md-menu-border-color) !important;
  background-color: var(--md-background-color-0) !important;
}

/* --- UNIVERSAL WINUI HALO (32px) --- */

/* 1. Prep the elements to act as anchors for the halo */

input[type="checkbox"], 
input[type="radio"] {
    position: relative !important;
    /* Ensure the halo can 'glow' outside the 16px box */
    overflow: visible !important; 
}

/* 2. Create the Halo for all types */

input[type="checkbox"]::after,
input[type="radio"]::after {
    content: "" !important;
    position: absolute !important;
    
    /* The new 32px size */
    width: 32px !important;
    height: 32px !important;
    
    /* Centering logic: (32px halo - 16px box) / 2 = 8px offset */
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    
    border-radius: 50% !important;
    z-index: -1 !important; /* Place it BEHIND the checkbox */
    
    /* Transitions only when coming from inactive/active per your preference */
    background-color: transparent !important;
}

checkbox::after,
radio::after {
    content: none !important;
    display: none !important;
    width: 0 !important;
    height: 0 !important;
}

/* Ensure it doesn't reappear on hover/active states */
checkbox:hover::after,
radio:hover::after,
checkbox:active::after,
radio:active::after {
    content: none !important;
    background-color: transparent !important;
}

html|button[autofocus], html|button[type="submit"], xul|button[default], button.primary {
  background-color: var(--md-accent-color) !important;
}

    @keyframes fadeInScale {
        0% {
            opacity: 0;
            transform: scale(108%,108%);
        }
        100% {
            opacity: 1;
            transform: scale(100%, 100%);
        }
    }

    .dialogTitle {
    font-size: larger !important;
    text-shadow: 1px 1px 3px #000 !important;
    }

    .dialogBox, .container[role="dialog"] {
        background-color: var(--md-background-color-0) !important;
        outline: 1px solid var(--md-menu-border-color) !important;
        border: none !important;
        animation: fadeInScale 285ms !important;
        border-radius: 8px !important;
        overflow: hidden !important;
    }

}

@-moz-document url(about:privatebrowsing) {
    .showPrivate {
        display: none !important;
    }
}


@-moz-document url-prefix(about:support) {
    td {
        background-color: var(--md-background-color-0) !important;
    }
}